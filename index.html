<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <title>AR Marker Interaction Skeleton</title>
  <meta name="viewport"
  content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <!-- AR.js -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

  <!-- LOGIC JS -->
  <script>
    // Click: Ẩn scene hiện tại → hiện scene tiếp theo
    AFRAME.registerComponent('scene-switch', {
      schema: {
        target: { type: 'selector' }
      },
      init: function () {
        this.el.addEventListener('click', () => {
          this.el.parentElement.setAttribute('visible', false);
          this.data.target.setAttribute('visible', true);
        });
      }
    });
  </script>
</head>

<body style="margin:0; overflow:hidden;">
  <a-assets>
    <!-- <a-asset-item></a-asset-item> -->
    <a-asset-item id="logo" src="asset/logo.glb"></a-asset-item>
    <a-asset-item id="nut" src="asset/nut.glb"></a-asset-item>
    <a-asset-item id="ans" src="asset/cautraloi.glb"></a-asset-item>
  </a-assets>

  <a-scene embedded
  arjs="sourceType: webcam; debugUIEnabled: false;"
  cursor="rayOrigin: mouse"
  raycaster="objects: .clickable">

    <!-- ===== MARKER CỦA BẠN ===== -->
    <a-marker type="pattern" url="marker.patt" smooth="true" smoothCount="10" smoothTolerance="0.01"
      smoothThreshold="5">

      <!-- ===== SCENE 1 ===== -->
      <a-entity id="scene1" visible="true">

        <a-gltf-model src="#logo" position="-1.04 0.3 0" scale="0.5 0.5 0.5" >
          <!-- class="clickable"
          scene-switch="target: #scene2"
          animation="property: scale;
                     from: 0 0 0;
                     to: 0.5 0.5 0.5;
                     dur: 1200;
                     easing: easeOutElastic" -->
        </a-gltf-model>

        <!-- <a-giltf-model > </a-giltf-model> -->
        <a-gltf-model src="#node" position="0.6 0.6 0" scale="0.2 0.2 0.2" class="clickable"
          scene-switch="target: #quiz" rotation="0 90 0">
        </a-gltf-model>
        <!-- NODE 2 -->
        <a-gltf-model src="#node" position="0.6 0.3 0" scale="0.2 0.2 0.2" rotation="0 90 0"
          animation="">
        </a-gltf-model>

        <!-- NODE 3 -->
        <a-gltf-model src="#node" position="0.6 0 0" scale="0.2 0.2 0.2" rotation="0 90 0"
          visible="">
        </a-gltf-model>
      </a-entity>

      <!-- ===== SCENE 2 ===== -->
      <a-entity id="quiz" visible="false">

        <a-gltf-model src="#cautraloi" position="0 0 0" scale="0.5 0.5 0.5" class="clickable">
        </a-gltf-model>

      </a-entity>

    </a-marker>

    <!-- CAMERA -->
    <a-entity camera="fov: 40"></a-entity>

  </a-scene>

</body>

</html>